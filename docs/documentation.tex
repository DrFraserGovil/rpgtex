

\documentclass[theme=default,justified,oneside,colums=1]{rpgbook}

\usepackage{doc}
\usepackage{blindtext}
\usepackage{splitidx} %use rather than imakeidx because it gets hyperrefs right!
\usepackage{pifont}
\usepackage{idxlayout}
\usepackage{multicol}
\usetikzlibrary{decorations.pathreplacing}
\usepackage[official]{eurosym} %%used for the euro in item examle
\newcommand{\cmark}{\ding{51}}%
\newcommand{\xmark}{\ding{55}}%
\makeindex
\def\rpgtex{\texttt{rpgtex}}

\cover{../example/img/typewriter}

\title{The rpgtex Package}
\subtitle{A package for generating beautiful RPG documents}
\author{Jack Fraser-Govil}

\input{parts/example_blocks.tex}

\NewDocumentCommand{\cmdidx}{ o m }{
	\foreach \m in {#2}
	{
		% \lindex{\texttt{\textbackslash{}\lowercase{\m}}@{\lowercase{\m}}}
		\IfNoValueTF{#1}
		{
			\index{\m}
		 }
		 {
			\index{#1!\m}
		 }
	}
}

\NewDocumentCommand{\cmdref}{m}{
	\texttt{\textbackslash#1}~\RpgPage[p]{Macro:#1}
}
\NewDocumentCommand{\envref}{m}{
	\texttt{#1}~\RpgPage[p]{#1}
}

 \input{parts/themes_fontprocessor.tex}
\begin{document}
	\frontmatter
	\maketitle{}

	%%% fancy intro/abstract
		\onecolumn{}
		~\vfill{}
		\newcommand\forcelink[2]
		{
			\href{#1}{{\color{blue!70!black}#2}}
		}
		\begin{center}
		\parbox[c]{0.8\linewidth}{
			\large
			\justifying{}

			\RpgDropCap{W}{elcome to the \rpgtex{} package}. This \LaTeX{} package is designed to allow users to flexibly typeset documents associated with Role Playing Games such as \textit{Dungeons \& Dragons} -- and many more besides. This packages defines a central engine: \texttt{rpgcore} which define a number of useful functions and classes, and a flexible set of \texttt{themes} which control how those commands are rendered in the final document.
			\vspace{2cm}


			\subsection*{Attribution \& License}

			This package would not have been possible without the team who developed \forcelink{https://github.com/rpgtex/DND-5e-LaTeX-Template/tree/dev}{its predecessor, the `DND 5e LateX Template'}. That code was released under an MIT license, the text of which can be found in the LICENSE file. \texttt{rpgtex} is released under the same license.
			}
		\end{center}

		\vfill{}
		% \twocolumn{}

	\tableofcontents


	
	\input{parts/intro.tex}
	
	\mainmatter{}
	
	%
	
	\part{rpgtex For Users}
		\input{parts/options.tex}
		\input{parts/commands.tex}
		\input{parts/environments.tex}
	\part{Classes \& Themes}
		\input{parts/classes.tex}
		% \input{parts/class_book.tex}
		% \input{parts/class_handout.tex}
		% \input{parts/class_card.tex}
		% \input{parts/class_deck.tex}
		\input{parts/themes_default.tex}
		\input{parts/themes_dnd.tex}
		\input{parts/themes_scifi.tex}
	
	\RpgSetTheme{default}
	\part{rpgtex For Designers}
		\input{parts/designer_commands.tex}
		\input{parts/featureforge.tex}

	{\footnotesize 
	% \begin{multicols}{3}
	\idxlayout{columns=3}
	\printindex
	% \end{multicols}
	}


\end{document}
