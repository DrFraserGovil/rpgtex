\section{Compiling rpgtex Documents}\label{C:Compiler}


	\rpgtex{} uses the \texttt{fontspec} package to allow custom fonts, and therefore requires compiling with \texttt{xelatex} or \texttt{luatex}:

	\begin{lstlisting}
		xelatex main.tex		#works
		luatex main.tex			#works
		pdflatex main.tex #fails
	\end{lstlisting}
	So long as \rpgtex{} is on the user's latex path, and the package properly configured \RpgPage[p]{S:Configuration} no further compilation steps are required. However, for ease of use, we provide the \verb|rpglatex| compiler as part of the \rpgtex{} distribution.

	\subsection{The \texttt{rpglatex} compiler}

	\rpgtex{} is shipped with a special compiler, \verb|rpglatex|. This is simply a python3 script which acts as a wrapper around either xelatex or luatex, but includes several quality-of-life changes to the interface to make it easier to use with \verb|rpgtex|.

	\begin{macrolist}
		\RpgMacro[rpglatex]{rpglatex}{Compiles latex documents using either xelatex or luatex}
		{
			rpglatex [options] <file> 
		}{
			\verb|rpglatex| has the following features:

			\newcommand\feature[3]
			{
				\textbf{#1} & #2 & \texttt{#3} \\
			}
			\begin{RpgTable}[width=\linewidth]{lXl}
				Feature & Description & Options \\
				\feature{Compiler Selection}{The \verb|xelatex| compiler is selected by default, but the \verb|-l, --luatex| flags set it to use luatex instead.}{-l, --luatex}
				\feature{Build Directory}{Compilation files (.aux, .log etc.) are stored in a build directory. The default is \verb|.build| in the calling location, but can be changed with the \verb|-b| flag}{-b <build dir>}
				\feature{Output Naming}{The name of the output file can be changed from the default (equal to the input tex name)}{-o <output name>}
				\feature{Multi-pass Compiling}{By default, the compiler runs twice in a row to enable references and \texttt{tikz[remember]} commands to function. A full three-compilation suite (necessary for very complex or reference-heavy documents) can be activated with the \verb|-f, --full| flag}{-f, --full}
				\feature{Volume Control}{latex is notoriously noisy, producing copius output. By default, this is suppressed and only a summary is printed. The summary can be removed (rendering it completely silent) with the \verb|-q| command, or the original output recovered in verbose mode; \verb|-v|.
				
				These outputs are always overriden if a compilation error occurs, in which case the full trace is output to the console.
				}{-q, -v}
				\feature{Auto-bibtex}{If the \verb|-r| or \verb|--ref| flag is set, \verb|bibtex| is automatically called in between the multi-compilation steps}{-r, --ref}
				\feature{Auto-visualisation}{If the \verb|--show 1| option is set (which it is by default), the compiler will call \verb|xdg-open <output-file>| upon completion of the compilation; automatically opening or context-switching to the document. This can be turned off by calling \verb|--show 0|}{--show}
				\feature{Print Mode}{A special interface for \rpgtex{}, this uses the \verb|\RpgCMD| interface \RpgPage[p]{S:CMD} to inject code into the latex document, setting the \verb|bg=print| mode and suppressing the background output.}{-p, --print}
			\end{RpgTable}
		}
	\end{macrolist}

	