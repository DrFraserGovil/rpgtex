\ExplSyntaxOn
\NewDocumentCommand \RpgLayoutOnly { +m }
{
	\bool_if:NT \l__rpg_layout_bool
	  {
			#1
	  }
}

\NewDocumentCommand \RpgActivateLayout { }
{
	\bool_set_true:N \l__rpg_layout_bool
}
%%%%%% Theme switching

\tl_new:N \l__rpg_theme_path
\msg_new:nnn { rpg } { theme_missing } {Could~not~locate~theme~#1~directly,~and~is~not~on~theme~path(#2)}




\NewDocumentCommand\RpgSetTheme { m }
{
	\RpgLayoutOnly
	{
		\str_if_eq:eeF{\g__rpg_base_class_tl}{standalone}
		{
			\clearpage
		}
	}

	%%%first try looking in the package themes
	\def\temp@themePath{\l__rpg_theme_path/#1/#1.cfg}
	\file_if_exist:nTF \temp@themePath
	{
		\input{\tl_use:N \temp@themePath}
	}
	{
		%%%if not found then try reading it as a direct reference
		\file_if_exist:nTF{#1}
		{
			\input{#1}
		}
		{
			\msg_error:nnxx { rpg } { theme_missing } { #1 } { \temp@themePath }

		}

	}

}

\NewDocumentCommand\RpgSetThemePath { m }
{
	\tl_set:Nn \l__rpg_theme_path {#1}
}
\RpgSetThemePath{themes}
