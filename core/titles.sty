\ExplSyntaxOn

\input{core/lowlevel/image_pages}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Part pages (with images)
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%% internal arguments defined in core/lowlevel/image_pages.tex
\RenewDocumentCommand{\part}{s o m }
{
	\bool_if:NTF{#1}
	{ %%starred version uses the underlying class part
		\__rpg_orig_part{#3}
	}
	{
		\bool_if:NTF{\str_if_eq_p:nn{#2}{none}}
		{ %%use default version if optional argument = 'none'
			\__rpg_orig_part{#3}
		}
		{
			%%otherwise use the custom theme part (RpgDrawPartPage), with or without a background image
			\__custom_part_page:nn{#2}{#3}
		}
	}
}


\NewDocumentCommand{\RpgSetPartPage}{+m}
{
	\cs_set:Nn \l__rpg_draw_part_page:n{#1}
}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Title pages (with images)
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%Add new commands in vein of \title, \author etc.
\NewDocumentCommand{\subtitle}{m}
{
	\gdef\@subtitle{#1}
}
\NewDocumentCommand{\cover}{m}
{
	\gdef\@cover{#1}
}

%set default values to blank
\subtitle{} 
\cover{}

%%%%%%%%%%%%%%%% %%%%%%%%%%%%%%
%Commands called by \maketitle
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%Used for books, similar ot part page, draws the contents of this macro over the top of the background image specified by \@cover
\NewDocumentCommand\RpgSetCover{+m}
{
	\cs_set:Nn \l__rpg_draw_cover_page:{#1}
}

%%%Used for articles, a lightweight, text-only title. Not rendered within a tikzpicture.
\NewDocumentCommand\RpgSetSimpleTitle{+m}
{
	\cs_set:Nn \l__rpg_simple_title:{#1}
}

%%Switching command used by classes to choose to use a full-page drawn title, or a simple text title

\NewDocumentCommand{\RpgUseCoverPage}{m}{
	\__rpg_set_bool_from_text:Ne {\g__rpg_use_cover_page_bool}{#1}
}

\ExplSyntaxOff
