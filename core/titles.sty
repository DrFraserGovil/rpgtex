\ExplSyntaxOn

\input{core/lowlevel/image_pages}


%%Redefine part to accept images as background
%% internal arguments defined in core/lowlevel/image_pages.tex
\RenewDocumentCommand{\part}{s o m }
{
	\bool_if:NTF{#1}
	{ %%starred version uses the underlying class part
		\__rpg_orig_part{#3}
	}
	{
		\bool_if:NTF{\str_if_eq_p:nn{#2}{none}}
		{ %%use default version if optional argument = 'none'
			\__rpg_orig_part{#3}
		}
		{
			%%otherwise use the custom theme part (RpgDrawPartPage), with or without a background image
			\bool_if:NTF{\__blank_background:n{#2}}
			{
				\__part_no_image:n{#3}
			}
			{
				\__part_with_image:nn{#2}{#3}
			}
		}
	}
}


%%The original definition to be overwritten by the themes 
\NewDocumentCommand\RpgDrawPartPage{m}{
	\node at (current~page.center) {\parbox[t]{0.8\linewidth}{\centering \RpgFontPart Part~\thepart \\ #1}};
}



\let\__rpg_orig_title\maketitle
\def\subtitle#1{\gdef\@subtitle{#1}} %let a subtitle be defined
\subtitle{~}%clear value
\newcommand\RpgTitle[1]{\__rpg_orig_title}
\newcommand\RpgBookTitle[1]{\__rpg_orig_title}
\newcommand\RpgHandoutTitle[1]{\__rpg_orig_title}

\NewDocumentCommand\RpgBasicTitle{}
{
	\thispagestyle{empty}

	% \begin{tikzpicture}[remember~picture, overlay]
	% 	\node[anchor=south] at ($(current~page.center)$) {\parbox[t]{0.9\paperwidth}{
	% 		\begin{center}
	% 			{\RpgFontTitle\color{black} \@title}
	% 			\newline
	% 			\vspace{1cm}

	% 			{{\RpgFontSubTitle { \color{black} \@subtitle}}}

	% 		\vspace{1cm}

	% 		\par{\RpgFontSubTitle { \color{black}\@author}}
	% 		\end{center}
	% 		}};

	% \end{tikzpicture}
	\clearpage

}


\ExplSyntaxOff
