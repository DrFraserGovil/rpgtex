\ExplSyntaxOn

\input{core/lowlevel/table}
\RequirePackage{supertabular}
% Table Definition
\NewDocumentEnvironment {RpgTable} { o m +b}
{
	\group_begin:

	\keys_set:nn {rpg/table}{width=\linewidth}
	\tl_if_novalue:nF {#1}
	{ 
		\keys_set:nn { rpg / table } {#1} 
	}


  	\par \vspace { 9pt plus 3pt minus 3pt } \noindent

 
	\__write_table_title:n {\l__rpg_table_header_tl}
  
	\bool_if:NTF {\l__rpg_table_simple_bool}
	{
		\__simple_table:nn {#2}{#3}	
	}
	{
		\bool_if:NTF {\l__rpg_table_breakable_bool}
		{
			\__fancy_table:nnn {xltabular}{#2}{#3}	
		}
		{
			\__fancy_table:nnn {tabularx}{#2}{#3}
		}
	}
}
{
  \vspace { 9pt plus 3pt minus 3pt }

  \group_end:
}
