\ExplSyntaxOn

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Custom headers and footers
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\RequirePackage {fancyhdr} % Adaptation of the footers



\NewDocumentCommand{\RpgSetPaper}{m}
{
	\str_if_empty:nTF{#1}
	{
		\fancyhead{}
	}
	{
		\fancyhead{
			 \bool_if:NT \l__rpg_show_background_bool
			{
			\begin{tikzpicture}[remember~picture,overlay]
			\node[inner~sep=0pt] at (current~page.center) {\includegraphics[width=\paperwidth,height=\paperheight]{#1}};
			\end{tikzpicture}
			}
		}

		\fancypagestyle{clear}
		{
			\fancyhf{}
			\fancyhead{
				\bool_if:NT \l__rpg_show_background_bool
				{
					\begin{tikzpicture}[remember~picture,overlay]
						\node[inner~sep=0pt] at (current~page.center) {\includegraphics[width=\paperwidth,height=\paperheight]{#1}};
					\end{tikzpicture}
				}
			}

			% Ensure footers are explicitly empty for this style
			\fancyfoot{}
		}
		
	}
}
\fancypagestyle{clear}{}
\fancypagestyle{empty}
{
	\fancyhf{}
	\fancyhead{}
	\fancyfoot{}
}






