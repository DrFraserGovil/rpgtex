\ExplSyntaxOn
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Legendary Actions
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

	\NewDocumentCommand{\RpgStatLegendarySection}{m}
		{

			\RpgStatSection{Legendary~Actions\ (#1\ uses)}
			{
				{\noindent\RpgFontStatBlockLegendary \linespread{0}
				\@legendarySpeil}
			}
		}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Legendary Actions
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%	

	\__rpg_add_tl_keys:Nn{rpg/stat/mythic}
	{
		\__rpg_bool_key:nn{passive-only}{\l__passive_only_bool}
		\__rpg_tl_key:nnn{narration}{\l__mythic_narration}{}
		\__rpg_tl_key:nnn{trait-name}{\l__mythic_trait}{Second~Phase}
		\__rpg_tl_key:nnn{trait}{\l__mythic_trait_body}{\@mythicDefaultBody}
	}
	\NewDocumentCommand{\RpgStatMythicSection}{+O{}}{
		\RpgStatSection{Mythic~Monster}

			\keys_set:nn{rpg/stat/mythic}{#1}
			

			\action{\l__mythic_trait}\ \l__mythic_trait_body \par
			\tl_if_empty:eF{\l__mythic_narration}
			{
				{\noindent\RpgFontStatBlockLegendary \@mythicNarrationLeadIn}
				
				\begin{RpgNarration}[before~skip=3pt,after~skip=3pt]
					\l__mythic_narration
				\end{RpgNarration}
			}
			{\noindent\RpgFontStatBlockLegendary 
				\@mythicGains\bool_if:nF{\l__passive_only_bool}{\ and\ Legendary\ Actions}.  \par
			}

	}
%%%%%% Strings
\ExplSyntaxOff
\def\@legendarySpeil{Immediately after another creature's turn, \RpgStatName{} can expend a Legendary Action to take one of the following actions. Expended actions are regained at the start of each of its turns.}
\def\@mythicDefaultBody{When reduced to 0HP, \RpgStatName{} recovers all hit points and removes all negative status effects.}
\def\@mythicNarrationLeadIn{When the mythic trait activates, read the following aloud:}
\def\@mythicGains{When\ the\ mythic\ trait\ is\ activated,\ \RpgStatName{}\ gains\ the\ following\ traits}

