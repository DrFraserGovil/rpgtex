\ExplSyntaxOn



%%%%%% RpgStat Environment

	
	
	

	% %%Starred version is a floating, two column version used for boss stats
	% %%Takes two sets of optional arguments: one to the float, one to the tcolorbox
	% \NewDocumentEnvironment {RpgStat*} { O{} O{} m +b}
	% {
	% 	\begin{figure*}[#1]
	% 	\centering
	% 	\rpg_stat_box:nn {#2} {#3}

	% 	\vspace{-1em}
	% 	\begin{multicols}{2}
	% 	#4
	% }
	% {
	% 	\end{multicols}
	% 	\end{RpgStatBox}
	% 	\end{figure*}
	% }
	
% %%%%%% Legendary Actions


	\newlist {__rpg_legendary} {description} {1}
	\setlist [__rpg_legendary]
	{
		font     = \RpgFontStatBlockBody,
		labelsep = \l__rpg_space_dim,
		noitemsep,
		topsep   = 6pt plus 2pt minus 2pt,
	}


	\NewDocumentCommand{\RpgStatLegendarySection}{m}
		{

			\RpgStatSection{Legendary~Actions\ (#1\ uses)}
			{
				{\noindent\RpgFontStatBlockLegendary \linespread{0}
				 Immediately\ after\ another\ creature's\ turn,\ \RpgStatName{}\ can\ expend\ a\ Legendary\ Action\ to\ take\ one\ of\ the\ following\ actions.\ Expended\ actions\ are\ regained\ at\ the\ start\ of\ each\ of\ its\ turns.}
			}
		}
			

	\__rpg_add_tl_keys:Nn{rpg/stat/mythic}
	{
		\__rpg_bool_key:nn{passive-only}{\l__passive_only_bool}
		\__rpg_tl_key:nnn{narration}{\l__mythic_narration}{}
		\__rpg_tl_key:nnn{trait-name}{\l__mythic_trait}{Second~Phase}
		\__rpg_tl_key:nnn{trait}{\l__mythic_trait_body}{\@mythicDefaultBody}
	}
	\NewDocumentCommand{\RpgStatMythicSection}{+O{}}{
		\RpgStatSection{Mythic~Monster}

			\keys_set:nn{rpg/stat/mythic}{#1}
			

			\action{\l__mythic_trait}\ \l__mythic_trait_body \par
			\tl_if_empty:eF{\l__mythic_narration}
			{
				{\noindent\RpgFontStatBlockLegendary When\ the\ mythic\ trait\ activates\ read\ the\ following\ aloud:}
				
				\begin{RpgNarration}[before~skip=3pt,after~skip=3pt]
					\l__mythic_narration
				\end{RpgNarration}
			}
			{\noindent\RpgFontStatBlockLegendary 
				When\ the\ mythic\ trait\ is\ activated,\ \RpgStatName{}\ gains\ the\ following\ traits\bool_if:nF{\l__passive_only_bool}{\ and\ Legendary\ Actions}.  \par
			}

	}
%%%%%% Strings
\ExplSyntaxOff
\def\@mythicDefaultBody{When reduced to 0HP, \RpgStatName{} recovers all hit points and removes all negative status effects.}
% \def\@mythicDescription{When reduced to 0HP, \RpgStatName{} recovers all hit points and removes all negative status effects.}

