%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Stat environments
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Stat block made to look like stat blocks in the PHB.
% Some some modifications made to include 2024 updates

\newcommand\statInclude[1]{\input{themes/dnd/statblock/#1}}

\statInclude{options.sty}
\statInclude{processing.sty}
\statInclude{appearance.sty}
\statInclude{attack.sty}
\statInclude{interface.sty}
\statInclude{statblock.sty}

\ExplSyntaxOn
\RpgStatTextFormat{
    \group_begin:
    %%initial value processing
    \__rpg_stat_preprocessing:n{#1}

    \rpg_stat_box:n{\l__box_options}
        \RpgHeaderBlock{#1}

        {\RpgFontStatBlockBody	#2}
    \end{RpgStatBox}
    \group_end:
}

\RpgStatCardFormat{
    
    \subsection{#1}
        #2
}

\NewDocumentCommand \rpg_stat_box:n { m }
{
    \bool_if:NTF \l__rpg_show_background_bool
    {
        \begin{RpgStatBox}[#1]{}
    }
    {
        \begin{RpgStatBox}[#1,colback=white,colframe=black!30!white]{}
    }   
}
