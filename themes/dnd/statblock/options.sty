\ExplSyntaxOn
%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Define D&D Variables
%%%%%%%%%%%%%%%%%%%%%%%%%%%%
	%%to avoid having to write everything 6 times for each stat:
	\seq_const_from_clist:Nn \g__dnd_stats {str,dex,con,int,wis,cha}

	\prop_const_from_keyval:Nn\g__dnd_skills
	{
			{athletics}={\l__str_mod},
			{acrobatics}={\l__dex_mod},
			{sleight~of~hand}={\l__dex_mod},
			{stealth}={\l__dex_mod},
			{arcana}={\l__int_mod},
			{history}={\l__int_mod},
			{investigation}={\l__int_mod},
			{nature}={\l__int_mod},
			{religion}={\l__int_mod},
			{animal~handling}={\l__wis_mod},
			{insight}={\l__wis_mod},
			{medicine}={\l__wis_mod},
			{perception}={\l__wis_mod},
			{survival}={\l__wis_mod},
			{deception}={\l__cha_mod},
			{intimidation}={\l__cha_mod},
			{performance}={\l__cha_mod},
			{persuasion}={\l__cha_mod},
	}

	\prop_const_from_keyval:Nn\g__dnd_stats_names
	{
		str={Strength},
		dex={Dexterity},
		con={Constitution},
		int={Intelligence},
		wis={Wisdom},
		cha={Charisma},
	}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Environment Options
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

	%% Appearance
		\RpgStatAddProperty{color}					{ \l__stat_color}		{rulecolor}
		\RpgStatAddProperty{outline-color}			{ \statOutlineColor}{\tl_use:N\l__stat_color!80!white}
		\RpgStatAddBoolean{filigree}{\l__stat_filigree}

	%% Top block
		\RpgStatAddProperty	{nickname}				{\l__rpg_stat_name}		{}
		\RpgStatAddProperty	{type}					{ \l__crtype_tl}		{}
		\RpgStatAddProperty	{armor-class}[ac,AC]	{ \l__armor_class_tl}	{10}
		\RpgStatAddProperty	{hit-points}[HP,hp]		{\l__hit_points_tl}		{\RpgDice{1d8}}
		\RpgStatAddProperty {speed}					{\l__speed_tl}			{30ft}
		\RpgStatAddProperty {initiative}			{\l__initiative_bonus_tl}{}
		\RpgStatAddProperty {proficiency-bonus}[proficiency]{\g__rpg_proficiency_bonus_int}{}

	%% Attributes
		%%define the hooks for stats and save-bools
		%% do so by looping over the names and constructing them fancily 
		\seq_map_inline:Nn{\g__dnd_stats}{
			\exp_args:Nnc\RpgStatAddProperty{#1}{l__#1_tl}{10}
			\exp_args:Nnc\RpgStatAddBoolean{#1-save}{l__#1_save_proficient_bool}
		}
	%% Bottom block
		\tl_new:N \l__processed_skills %%storage for skills (& expertise) after processing
		\RpgStatAddProperty{skills}				{\l__raw_skills_tl}			{}
		\RpgStatAddProperty{skills-expertise}	{\l__raw_skills_expertise_tl}{}
		\RpgStatAddProperty{languages}			{\l__languages_tl}		{}
		\RpgStatAddProperty{senses}				{\l__senses_tl}			{}
		\RpgStatAddProperty{passive-perception}	{\l__passive_perception_tl}{}
		\RpgStatAddProperty{challenge}[cr,CR]	{\l__challenge_tl}		{}
		\RpgStatAddProperty{damage-vulnerabilities}{\l__damage_vulnerabilities_tl}{}
		\RpgStatAddProperty{damage-resistances}	{\l__damage_resistances_tl}{}
		\RpgStatAddProperty{condition-immunities}	{\l__condition_immunities_tl}{}
		\RpgStatAddProperty{damage-immunities}	{\l__damage_immunities_tl}{}

