%%Set the D&D specific fonts

\ExplSyntaxOn

\providefontfamily{\kepler}{KpSans}
[
	Path= \RpgPackagePath/themes/dnd/fonts/,
	UprightFont = *-Regular,
	BoldFont= *-Bold,
	ItalicFont=*-Italic,
	BoldItalicFont=*-BoldItalic,
	% SmallCapsFont=EBGaramondSC08-Regular.otf
]

\providefontfamily{\keplerserif}{KpRoman}
[
	Path= \RpgPackagePath/themes/dnd/fonts/,
	UprightFont = *-Regular,
	BoldFont= *-Bold,
	ItalicFont=*-Italic,
	BoldItalicFont=*-BoldItalic,
	% SmallCapsFont=*-Light,
]

\providefontfamily{\gillius}{GilliusADFNo2}
[
	Path= \RpgPackagePath/themes/dnd/fonts/,
	UprightFont = *-Regular,
	BoldFont= *-Bold,
	ItalicFont=*-Italic,
	BoldItalicFont=*-BoldItalic,
	SmallCapsFont=EBGaramondSC08-Regular.otf
]


\providefontfamily{\bookman}{Bookman~Old~Style~Std}
[
	Path= \RpgPackagePath/themes/dnd/fonts/,
	UprightFont = *~Regular,
	BoldFont= *~Bold,
	ItalicFont=*~Italic,
	BoldItalicFont=*~Bold~It,
	SmallCapsFont=EBGaramondSC08-Regular.otf
]



\providecommand\titlemode{\linespread{.9} \color{titlered} \keplerserif \scshape }
%%%%%%%%%%%%%%%%%%%%%%%%
%Important!
%%%%%%%%%%%%%%%%%%%%%%%%
%The white color of the cover page in rpgbook mode is not set here, but in the \RpgDrawCoverPage command
%This is to prevent white text being used everywhere else!

\RpgCreateFont{\RpgFontStatBlockLegendary}{stat-block-legendary}

\RpgSetFont{
	main-body-family			={\bookman},
	%Sections
	title-family=		{\normalfont},
	title-style			= {\bfseries\fontsize{30}{50}\selectfont\color{titlered}},
	subtitle-family		={\scshape},
	subtitle-style 		= {\LARGE\color{titlered} },
	part-style			= {\color{titlered}\fontsize{50}{30}\selectfont},
	chapter-style		= {\titlemode\fontsize{30}{50}\selectfont},
	section-style		= {\titlemode \Huge},,
	subsection-style	= {\titlemode \huge},,
	subsubsection-style	= {\titlemode \Large},,
	paragraph-style	= {\bfseries \slshape},
	subparagraph-style	= {\bfseries \slshape},
	%Tables
	table-title-family	= {\kepler},
	table-title-style	= {\bfseries\large\scshape},
	table-header-family	= {\kepler},
	table-body-family	= {\gillius},
	%tip boxes
	tip-title-family= {\kepler},
	tip-title-style	= {\bfseries\scshape},
	tip-body-family	= {\gillius},
	tip-body-style	= {\small},
	%sidebars
	sidebar-title-family= {\kepler},
	sidebar-title-style	= {\bfseries\scshape},
	sidebar-body-family	= {\gillius},
	sidebar-body-style	= {\small},
	%narration
	narration-family	= {\gillius},
	narration-style		= {\small},
	% TOC
	toc-part-style		= {\LARGE \keplerserif \scshape \color{titlered}},
	toc-chapter-style	= {\Large \keplerserif \scshape \color{titlered}},
	toc-section-style	= {\normalsize},
	%stat block
	stat-block-title-family={\scshape},
	stat-block-title-style= {\bfseries \LARGE \color{statblockcolor}},
	stat-block-body-family={\bookman},
	stat-block-body-style={\small\color{black}},
	stat-block-section-family={\kepler},
	stat-block-section-style={\color{statblockcolor} \scshape \large},
	%%misc
	footer-style		= {\color{pagegold}\scriptsize},
	page-number-style	= {\color{pagegold}\scriptsize},
	drop-cap-family		= {\Royal},
	%%Spell card
	card-title-family = {\keplerserif},
	card-title-style = { \color{titlered}\large\bfseries},
	card-header-family = {\normalfont}, 
	card-header-style = {\normalfont \scshape \footnotesize}, 
	card-body-family = {\normalfont},
	card-body-style = {\small},
	emph-family = {\keplerserif},
	emph-style = {\bfseries\scshape\larger[1]},
	stat-block-legendary-family={\normalfont},
	stat-block-legendary-style={\it \scriptsize \color{gray!90}},
	
}

%%modify fonts if in handout mode
\str_if_eq:NNT \g__rpg_base_class_tl {article}
{
	\RpgSetFont{
		title-style			= {\bf\scshape\Huge\color{titlered}},
		subtitle-style			= {\bf\normalsize\color{titlered}},
	}
	{}
}
